<%- include('../partials/adminHead.ejs') %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


    <body>
        <!-- <div class="section d-flex ">
            <div class="side-bar text-center">
                <h1 style="font-family: 'Fasthand', cursive;" class=" mt-3">Ciazzzzz</h1>
                <div class="container-fluid p-5 pb-0">
                    <a href="/admin/"><button id="primary-btn" class="btn mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-clipboard2-data-fill" viewBox="0 0 16 16">
                                <path
                                    d="M10 .5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V2a.5.5 0 0 0 .5.5h5A.5.5 0 0 0 11 2v-.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5Z" />
                                <path
                                    d="M4.085 1H3.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1h-.585c.055.156.085.325.085.5V2a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 4 2v-.5c0-.175.03-.344.085-.5ZM10 7a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0V7Zm-6 4a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1Zm4-3a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z" />
                            </svg>
                            Dashboard</button></a>
                    <a href="/admin/products"><button class="btn mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-tags-fill" viewBox="0 0 16 16">
                                <path
                                    d="M2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 2 6.586V2zm3.5 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
                                <path
                                    d="M1.293 7.793A1 1 0 0 1 1 7.086V2a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l.043-.043-7.457-7.457z" />
                            </svg>
                            Products</button></a>
                    <a href="/admin/users"><button class="btn mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-people-fill" viewBox="0 0 16 16">
                                <path
                                    d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" />
                            </svg>
                            Users</button></a>
                    <a href="/admin/orders"><button class="btn mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-cart-dash-fill" viewBox="0 0 16 16">
                                <path
                                    d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM6.5 7h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1 0-1z" />
                            </svg>
                            Orders</button></a>
                    <a href="/admin/mainCategory"><button class="btn mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-basket" viewBox="0 0 16 16">
                                <path
                                    d="M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1v4.5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 13.5V9a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h1.217L5.07 1.243a.5.5 0 0 1 .686-.172zM2 9v4.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V9H2zM1 7v1h14V7H1zm3 3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3A.5.5 0 0 1 4 10zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3A.5.5 0 0 1 6 10zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3A.5.5 0 0 1 8 10zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5z" />
                            </svg>
                            Category</button></a>
                    <a href="/admin/bannerSlider"><button class="btn mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-kanban" viewBox="0 0 16 16">
                                <path
                                    d="M13.5 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h11zm-11-1a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2h-11z" />
                                <path
                                    d="M6.5 3a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3zm-4 0a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3zm8 0a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3z" />
                            </svg>
                            Banners</button></a>
                </div>
                <a href="/admin/logOut" id="btnOut" class="btn btn-danger mt-5">LogOut</a>
            </div>
            <div class="content-section">
                <nav class="navbar navbar-expand-lg navbar-light bg-white text-center">
                    <div class="container  d-block">
                        <div class="row">
                            <div class="col">
                                <a class="navbar-brand" href="/admin/">Dashboard</a>
                            </div>
                            <div class="col">
                                <input type="search">
                                <button class="btn btn-success">Search</button>
                            </div>
                            <div class="col">
                                <a class="navbar-brand" href="#">profile</a>
                            </div>
                        </div>
                    </div>
                </nav>
                <div class="container ">
                    <div class="cards">
                        <div class="row g-4">
                            <div class="col-sm-6 col-xl-3">
                                <div class="chart rounded d-flex align-items-center justify-content-between p-4">
                                    <i class="fa fa-chart-line fa-3x text-primary"></i>
                                    <div class="ms-3">
                                        <p class="mb-2">Total Revenue</p>
                                        <div class="total-amout d-flex">
                                            <span class="me-1">&#8377;</span><span class="mb-0">
                                                <%= totalRevenue %>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-xl-3">
                                <div class="chart rounded d-flex align-items-center justify-content-between p-4">
                                    <i class="fa fa-chart-bar fa-3x text-primary"></i>
                                    <div class="ms-3">
                                        <p class="mb-2">Total Sale</p>
                                        <h6 class="mb-0">
                                            <%= totalSales %>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-xl-3">
                                <div class="chart rounded d-flex align-items-center justify-content-between p-4">
                                    <i class="fa fa-chart-area fa-3x text-primary"></i>
                                    <div class="ms-3">
                                        <p class="mb-2">Users</p>
                                        <h6 class="mb-0">
                                            <%= users.length %>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-xl-3">
                                <div class="chart rounded d-flex align-items-center justify-content-between p-4">
                                    <i class="fa fa-chart-pie fa-3x text-primary"></i>
                                    <div class="ms-3">
                                        <p class="mb-2">Products</p>
                                        <h6 class="mb-0">
                                            <%= products.length %>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="charts">
                        <div class="chart-head">
                            <div class="row">
                                <div class="col">Monthly Revenue</div>
                                <div class="col">Sales</div>
                            </div>
                        </div>
                        <div class="chart-content">
                            <div class="row">
                                <div class="chart card col" id="mychart"></div>
                                <div class="chart card col" id="chart"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="content d-flex">
            <div class="menu">
                <div class="header text-center">
                    <h1 style="font-family: 'Fasthand', cursive;" class=" mt-3">Ciazzzzz</h1>
                </div>
                <ul class="menu-content">
                    <li id="primary-btn"><a href="/admin/"><span
                                class="material-symbols-outlined">dashboard</span><span>DashBoard</span></a></li>
                    <li><a href="/admin/products"><span
                                class="material-symbols-outlined">inventory</span><span>Products</span></a></li>
                    <li><a href="/admin/users"><span
                                class="material-symbols-outlined">group</span><span>Users</span></a></li>
                    <li><a href="/admin/orders"><span
                                class="material-symbols-outlined">orders</span><span>Orders</span></a></li>
                    <li><a href="/admin/mainCategory"><span
                                class="material-symbols-outlined">category</span><span>Categories</span></a></li>
                    <li><a href="/admin/bannerSlider"><span
                                class="material-symbols-outlined">ad</span><span>Banners</span></a></li>
                    <li><a href="/admin/logOut"><span
                                class="material-symbols-outlined">logout</span><span>Logout</span></a></li>
                </ul>
            </div>
            <div class="content-section">
                <div class="d-flex justify-content-center">
                    <a class="navbar-brand fw-bold" href="/admin/">Dashboard</a>
                </div>
                <div class="container-fluid ">
                    <div class="row justify-content-center">
                        <div class="col text-center">
                            <div class="chart rounded d-flex align-items-center justify-content-between p-2">
                                <i class="fa fa-chart-line  text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Total Revenue</p>
                                    <div class="total-amout d-flex">
                                        <span class="me-1">&#8377;</span><span class="mb-0">
                                            <%= totalRevenue %>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="chart rounded d-flex align-items-center justify-content-between p-2">
                                <i class="fa fa-chart-bar  text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Total Sale</p>
                                    <h6 class="mb-0">
                                        <%= totalSales %>
                                    </h6>
                                </div>
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="chart rounded d-flex align-items-center justify-content-between p-2">
                                <i class="fa fa-chart-area  text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Users</p>
                                    <h6 class="mb-0">
                                        <%= users.length %>
                                    </h6>
                                </div>
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="chart rounded d-flex align-items-center justify-content-between p-2">
                                <i class="fa fa-chart-pie  text-primary"></i>
                                <div class="ms-3">
                                    <p class="mb-2">Products</p>
                                    <h6 class="mb-0">
                                        <%= products.length %>
                                    </h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="width: 100%;" class="charts">
                        <div class="cart">
                            <div class="chart card col" id="mychart"></div>
                        </div>
                        <div class="cart">
                            <div class="chart card col" id="chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <style>
            @import url('https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200');

            body {
                /* min-height: 100vh; */
                background: rgba(238, 234, 234, 1);
            }

            .chart i {
                font-size: 40px;
            }
            .charts{
                display: flex;
            }
            .content {
                height: 100vh;
            }

            .menu::-webkit-scrollbar {
                display: none;
            }

            .menu {
                position: fixed;
                width: 105px;
                height: 100%;
                transition: .3s;
                scrollbar-width: none;
                overflow: hidden scroll;
                background: #ffffff;
                -ms-overflow-style: none;
                /* padding: 20px 20px 20px 0; */
                backdrop-filter: blur(5px);
                box-shadow: 8px 0px 9px 0px #00000014;
            }

            ul {
                padding-left: revert;
                padding-top: 30px;
            }

            .menu:hover {
                width: 260px;
                color: white;
            }

            .menu:hover li span:nth-child(2) {
                display: block;
            }

            .menu-content li {
                list-style: none;
                border-radius: 50px 50px 50px 50px;
                transition: .3s;
                margin-bottom: 30px;
                /* padding-left: 20px; */
            }

            .menu-content li:hover {
                background: rgb(187, 127, 243);
            }

            .menu-content li span:nth-child(2) {
                display: none;
            }

            a {
                text-decoration: none;
                color: black;
                display: flex;
                align-items: center;
                font-family: 'calibri';
            }

            a:hover {
                color: #ffffff;
            }

            .header h1 {
                font-size: 30px;
            }

            .material-symbols-outlined {
                /* padding: 10px; */
                font-size: 30px;
                /* margin-right: 10px; */
                /* border-radius: 50%; */
                color: black;
            }

            .content-section {
                width: 100%;
                height: 100vh;
                margin-left: 105px;
            }

            @media (max-width: 500px) {
                .menu {
                    width: 60px;
                }

                ul {
                    padding: 17px 0 0 17px;
                }

                .material-symbols-outlined {
                    font-size: 20px;
                }

                .header h1 {
                    font-size: 15px;
                }

                .menu-content li:hover {
                    width: 10pc;
                }

                .content-section {
                    margin-left: 60px;
                }

                .chart p,
                span,
                h6 {
                    /* padding: 10px; */
                    font-size: 6px;
                }

                .chart i {
                    font-size: 20px;
                }
                .chart{
                    min-height: 60.7px;
                }
                .charts{
                    display: block;
                    width: 220px;
                }
            }
        </style>

        <%- include('../partials/script.ejs') %>
            <script>
                let revenueData = '<%= JSON.stringify(monthlyData) %>'
                let pendingOrders = '<%= JSON.stringify(pendingOrders)%>'
                let deliveredOrders = '<%= JSON.stringify(deliveredOrders)%>'
                let cancelledOrders = '<%= JSON.stringify(cancelledOrders)%>'
                let returnedOrders = '<%= JSON.stringify(returnedOrders)%>'

                let value = JSON.parse(revenueData)
                let Pending = JSON.parse(pendingOrders)
                let Delivered = JSON.parse(deliveredOrders)
                let Cancelled = JSON.parse(cancelledOrders)
                let Returned = JSON.parse(returnedOrders)

                let total = Pending + Delivered + Cancelled + Returned




                var options = {
                    series: [{
                        name: 'Revenue',
                        data: value
                    }],
                    chart: {
                        type: 'bar',
                    },
                    plotOptions: {
                        bar: {
                            borderRadius: 10,
                            dataLabels: {
                                position: 'top', // top, center, bottom
                            },
                        }
                    },
                    dataLabels: {
                        enabled: true,
                        formatter: function (val) {
                            return val;
                        },
                        offsetY: -20,
                        style: {
                            fontSize: '12px',
                            colors: ["#304758"]
                        }
                    },

                    xaxis: {
                        categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                        position: 'top',
                        axisBorder: {
                            show: false
                        },
                        axisTicks: {
                            show: false
                        },
                        crosshairs: {
                            fill: {
                                type: 'gradient',
                                gradient: {
                                    colorFrom: '#D8E3F0',
                                    colorTo: '#BED1E6',
                                    stops: [0, 100],
                                    opacityFrom: 0.4,
                                    opacityTo: 0.5,
                                }
                            }
                        },
                        tooltip: {
                            enabled: true,
                        }
                    },
                    yaxis: {
                        axisBorder: {
                            show: false
                        },
                        axisTicks: {
                            show: false,
                        },
                        labels: {
                            show: false,
                            formatter: function (val) {
                                return val;
                            }
                        }

                    },
                };

                var chart = new ApexCharts(document.querySelector("#mychart"), options);
                chart.render();



                var options = {
                    series: [Returned, Delivered, Cancelled, Pending],
                    labels: ["Returned", "Delivered", "Cancelled", "Pending"],
                    chart: {
                        type: 'donut',
                    },
                    plotOptions: {
                        pie: {
                            donut: {
                                labels: {
                                    show: true,
                                    name: {
                                        show: true,
                                        offsetY: -22 // Adjust this value to position the name label
                                    },
                                    value: {
                                        show: true,
                                        offsetY: 0, // Adjust this value to position the value label
                                        formatter: function (val) {
                                            return val + "%" // Format the value label as needed
                                        }
                                    },
                                    total: {
                                        show: true,
                                        showAlways: true, // Always show the total label
                                        label: 'Total', // Text for the total label
                                        formatter: function (w) {
                                            return total // Provide the total value here
                                        }
                                    }
                                }
                            }
                        }
                    }
                };


                var piechart = new ApexCharts(document.querySelector("#chart"), options);
                piechart.render();
            </script>
            <style>
                .cards .card {
                    background-color: white;
                    height: 15vh;
                    margin: 0.5rem;
                }

                .chart {
                    background-color: white;
                    margin: 0.5rem;
                }

                #SvgjsSvg1001,
                #apexchartscr8pj4q6 {
                    width: 100;
                }
            </style>
    </body>

    </html>